CKEDITOR.dialog.add("simple-image-browser-dialog",function(){return{title:"Image Browser",minWidth:800,minHeight:400,maxWidth:800,maxHeight:400,contents:[{id:"tab-step1",label:"Browse for images",elements:[{type:"html",align:"left",id:"titleid",style:"font-size: 20px; font-weight: bold;",html:""},{type:"html",align:"left",id:"msg",style:"",html:'<div id="imageBrowser"></div>'}]}]}}),CKEDITOR.plugins.add("simple-image-browser",{init:function(e){"undefined"==typeof CKEDITOR.config.simpleImageBrowserListType&&(CKEDITOR.config.simpleImageBrowserListType="thumbnails"),e.on("dialogShow",function(e){var i;i=e.data,"simple-image-browser-dialog"===i.getName()&&$.get(CKEDITOR.config.simpleImageBrowserURL,function(e){var i;return console.log(e),i=$.parseJSON(e),e="",$.each(i,function(i,t){e="thumbnails"===CKEDITOR.config.simpleImageBrowserListType?e+"<div onclick=\"CKEDITOR.tools.simpleimagebrowserinsertpicture('"+t.url+"');\" style=\"position:relative;width:75px;height:75px;margin:5px;background-image:url('"+t.url+"');background-repeat:no-repeat;background-size:125%;background-position:center center;float:left;\"></div>":"link"}),$("#imageBrowser").html(e)})}),e.addCommand("simple-image-browser-start",new CKEDITOR.dialogCommand("simple-image-browser-dialog")),CKEDITOR.tools.simpleimagebrowserinsertpicture=function(i){var t,o;console.log(i),e=CKEDITOR.currentInstance,t=CKEDITOR.dialog.getCurrent(),o='<img src="'+i+'" data-cke-saved-src="'+i+'" alt="'+i+'" />',e.config.allowedContent=!0,e.insertHtml(o.trim()),t.hide()},e.ui.addButton("Image Browser",{label:"Image Browser ",command:"simple-image-browser-start",icon:this.path+"images/icon.png"})}});